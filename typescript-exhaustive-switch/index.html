<!DOCTYPE html>
<html lang="en">

<head>
    <title>Exhaustive Switch Statements in TypeScript | arkus on the net</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://blog.arkusonthe.net/style.css">
    <link rel="stylesheet" href="https://blog.arkusonthe.net/color/green.css">

        <link rel="stylesheet" href="https://blog.arkusonthe.net/color/background_pink.css">
    
    <link rel="stylesheet" href="https://blog.arkusonthe.net/font-hack-subset.css">

        <link rel="shortcut icon" type="image/png" href="/favicon.png">
    
    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://blog.arkusonthe.net" style="text-decoration: none;">
                    <div class="logo">
                      
                            arkus on the net
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://blog.arkusonthe.net">blog</a></li>
            
                <li><a href="https://blog.arkusonthe.net/tags">tags</a></li>
            
                <li><a href="https://blog.arkusonthe.net/archive">archive</a></li>
            
                <li><a href="https://blog.arkusonthe.net/about">about me</a></li>
            
                <li><a href="https://github.com/arkus7" target="_blank" rel="noopener noreferrer">github</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://blog.arkusonthe.net/typescript-exhaustive-switch/">Exhaustive Switch Statements in TypeScript</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2023-06-14
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://blog.arkusonthe.net/tags/typescript/">#TypeScript</a>&nbsp;
                <a class="post-tag" href="https://blog.arkusonthe.net/tags/type-safety/">#type safety</a></span>
    

        
        <div class="post-content">
            <p>When working on a blog post about enums in Rust<sup class="footnote-reference"><a href="#1">1</a></sup>, I realized that <code>switch</code> statements in TypeScript are not exhaustive.</p>
<p>This means that the compiler doesn't warn you if you forget to handle a case in a <code>switch</code> statement.
This is a problem because it can lead to bugs that are difficult to track down.</p>
<p>As you may know, I'm a big fan of type safety. I find it very concerning that forgetting to handle an enum variant doesn't result in a compiler error.</p>
<p>In this post, I'll show you how to make your <code>switch</code> statements exhaustive so that you can avoid these bugs.</p>
<span id="continue-reading"></span><h1 id="what-is-an-exhaustive-switch-statement">What is an Exhaustive Switch Statement?</h1>
<p>An exhaustive <code>switch</code> statement is one that handles all possible cases. For example, if you have an enum with three variants, your <code>switch</code> statement should have three cases: one for each variant.</p>
<p>Here's an example of an exhaustive <code>switch</code> statement in TypeScript:</p>
<pre data-linenos data-lang="typescript" style="background-color:#2b303b;color:#6c7079;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><table><tbody><tr><td>1</td><td><span style="color:#cd74e8;">enum </span><span style="color:#abb2bf;">Direction {
</span></td></tr><tr><td>2</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>3</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>4</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>5</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>6</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>7</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td>8</td><td><span style="color:#cd74e8;">function </span><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">Direction) {
</span></td></tr><tr><td>9</td><td><span style="color:#abb2bf;">  </span><span style="color:#cd74e8;">switch </span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">) {
</span></td></tr><tr><td>10</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>11</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving up&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>12</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>13</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>14</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving down&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>15</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>16</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>17</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving left&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>18</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>19</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>20</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving right&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>21</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>22</td><td><span style="color:#abb2bf;">  }
</span></td></tr><tr><td>23</td><td><span style="color:#abb2bf;">}
</span></td></tr></tbody></table></code></pre>
<p>As you can see, this <code>switch</code> statement handles all possible cases.</p>
<p>Unfortunately, if you add a new variant to the <code>Direction</code> enum, the compiler won't warn you that you need to add a new case to the <code>switch</code> statement.</p>
<p>Let's see what happens if we add a new variant to the <code>Direction</code> enum:</p>
<blockquote>
<p>All code snippets were tested with TypeScript v5.1.3</p>
</blockquote>
<pre data-linenos data-lang="typescript" style="background-color:#2b303b;color:#6c7079;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><table><tbody><tr><td>1</td><td><span style="color:#cd74e8;">enum </span><span style="color:#abb2bf;">Direction {
</span></td></tr><tr><td>2</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>3</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>4</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>5</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">6</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Forward</span><span style="color:#abb2bf;">, </span><span style="font-style:italic;color:#5f697a;">// new variant
</span></mark></td></tr><tr><td>7</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>8</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td>9</td><td><span style="color:#cd74e8;">function </span><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">Direction) {
</span></td></tr><tr><td>10</td><td><span style="color:#abb2bf;">  </span><span style="color:#cd74e8;">switch </span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">) {
</span></td></tr><tr><td>11</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>12</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving up&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>13</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>14</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>15</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving down&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>16</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>17</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>18</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving left&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>19</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>20</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>21</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving right&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>22</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>23</td><td><span style="color:#abb2bf;">  }
</span></td></tr><tr><td>24</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>25</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">26</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="font-style:italic;color:#5f697a;">// call `move()` with the new variant
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">27</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Forward</span><span style="color:#abb2bf;">);
</span></mark></td></tr></tbody></table></code></pre>
<p>This code <a href="https://www.typescriptlang.org/play?#code/KYOwrgtgBAIglgJ2AYwC5wPYigbwFBRQCqADgDQGwYDuIFhAMsAGar1QBKcA5gBZuUAYhgTUAhggAmZKAHpZUEMGpQAbhLhiQqPAF88eZmBBpM2CBlXAAFJMQp0WAFyx7prAEpclAM7U4qMi8ULZujiBe+ISEyGI+wK5I7iAAdKROlNFQyFg+GAA2wCn5GNzWAOQAspZwINxQYCTlHgDcmdEARkhiANZtWbHxiQ5mKTA0IBlZMbkFRSVlVTV1UJITzf3TXcC9mzFxCfBJ4SlMrFPTOSB5hcWlFdWqtfWFrBvthNu77YOHYaNcPioC4DWa3BYPZb1BA8fjvaZQL59Sj6fR4CxWaxHEZYFLCUQSSStIA">compiles without any errors or warnings</a>, but it's not exhaustive because it doesn't handle the <code>Forward</code> variant, therefore it's not very type safe.</p>
<h1 id="why-is-an-exhaustive-switch-statement-important">Why is an exhaustive switch statement important?</h1>
<p>An exhaustive <code>switch</code> statement is crucial as it aids in avoiding elusive bugs.</p>
<p>It is very easy to forget to handle a case in a <code>switch</code> statement, especially if you are working on a large codebase where there are many places where a particular enum is used (giving you many <code>switch</code> statements to update).</p>
<p>As a result, you can end up with bugs, which won't show up until you run your code and try to use the new variant.</p>
<blockquote>
<p>Hopefully, you'll have good test coverage so that you catch these bugs before they make it to production.</p>
</blockquote>
<p>Most often, this becomes an issue during code refactoring or when a new variant is added to an enum.</p>
<h1 id="how-to-make-your-switch-statements-exhaustive">How to make your switch statements exhaustive</h1>
<p>There are two ways to make your <code>switch</code> statements exhaustive:</p>
<ol>
<li>Use the <code>default</code> case</li>
<li>Combine <code>default</code> case with the <code>never</code> type</li>
</ol>
<p>Let's take a look at each of these options.</p>
<h2 id="use-the-default-case">Use the <code>default</code> case</h2>
<p>The easiest way to make your <code>switch</code> statements exhaustive is to use the <code>default</code> case. This makes your <code>switch</code> statement handle all possible cases that aren't explicitly handled by another case.</p>
<p>Here's an example of using the <code>default</code> case to make your <code>switch</code> statement exhaustive:</p>
<pre data-linenos data-lang="typescript" style="background-color:#2b303b;color:#6c7079;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><table><tbody><tr><td>1</td><td><span style="color:#cd74e8;">enum </span><span style="color:#abb2bf;">Direction {
</span></td></tr><tr><td>2</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>3</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>4</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>5</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>6</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>7</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td>8</td><td><span style="color:#cd74e8;">function </span><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">Direction) {
</span></td></tr><tr><td>9</td><td><span style="color:#abb2bf;">  </span><span style="color:#cd74e8;">switch </span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">) {
</span></td></tr><tr><td>10</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>11</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving up&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>12</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>13</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>14</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving down&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>15</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>16</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>17</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving left&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>18</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>19</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>20</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving right&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>21</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">22</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">default</span><span style="color:#abb2bf;">:
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">23</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="font-style:italic;color:#5f697a;">// handle all other cases
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">24</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving in an unknown direction&#39;</span><span style="color:#abb2bf;">);
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">25</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></mark></td></tr><tr><td>26</td><td><span style="color:#abb2bf;">  }
</span></td></tr><tr><td>27</td><td><span style="color:#abb2bf;">}
</span></td></tr></tbody></table></code></pre>
<p>This code will work &quot;as expected&quot; if you add a new variant to the <code>Direction</code> enum.
However, it's still easy to forget to handle the new variant when it requires special handling, especially for a developer who just started working with a codebase.</p>
<p>It also may seem redundant to have a <code>default</code> case when you already have a <code>switch</code> statement that handles all possible cases and it might be tempting to remove it.</p>
<p>We can improve this code by using the <code>never</code> type to make compiler errors when we forget to handle a case.</p>
<h2 id="combine-default-case-with-the-never-type">Combine <code>default</code> case with the <code>never</code> type</h2>
<p>The second way to make your <code>switch</code> statements exhaustive is to use the <code>default</code> case with a special type called <code>never</code>. It is used to make sure that you've handled all possible cases in a <code>switch</code> statement. If you forget to handle a case, the compiler will give you an error.</p>
<blockquote>
<p>The <code>never</code> type is a special type that represents a value that will never occur. It's useful for making sure that you've handled all possible cases in a <code>switch</code> statement.</p>
</blockquote>
<p>Let's take a look at an example:</p>
<pre data-linenos data-lang="typescript" style="background-color:#2b303b;color:#6c7079;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><table><tbody><tr><td>1</td><td><span style="color:#cd74e8;">enum </span><span style="color:#abb2bf;">Direction {
</span></td></tr><tr><td>2</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>3</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>4</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>5</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">6</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Forward</span><span style="color:#abb2bf;">, </span><span style="font-style:italic;color:#5f697a;">// new variant
</span></mark></td></tr><tr><td>7</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>8</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td>9</td><td><span style="color:#cd74e8;">function </span><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">Direction) {
</span></td></tr><tr><td>10</td><td><span style="color:#abb2bf;">  </span><span style="color:#cd74e8;">switch </span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">) {
</span></td></tr><tr><td>11</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>12</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving up&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>13</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>14</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>15</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving down&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>16</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>17</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>18</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving left&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>19</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>20</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>21</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving right&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>22</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">23</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">default</span><span style="color:#abb2bf;">:
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">24</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="font-style:italic;color:#5f697a;">// this line will cause a compiler error
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">25</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="font-style:italic;color:#5f697a;">// as `Direction.Forward` is not assignable to `never`
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">26</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">const </span><span style="color:#eb6772;">_exhaustiveCheck</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">never </span><span style="color:#adb7c9;">= </span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">;
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">27</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></mark></td></tr><tr><td>28</td><td><span style="color:#abb2bf;">  }
</span></td></tr><tr><td>29</td><td><span style="color:#abb2bf;">}
</span></td></tr></tbody></table></code></pre>
<p>This code <a href="https://www.typescriptlang.org/play?#code/KYOwrgtgBAIglgJ2AYwC5wPYigbwFBRQCqADgDQGwYDuIFhAMsAGar1QBKcA5gBZuUAYhgTUAhggAmZKAHpZUEMGpQAbhLhiQqPAF88eZmBBpM2CBlXAAFJMQp0WAFyx7prAEpclAM7U4qMi8ULZujiBe+ISEyGI+wK5I7iAAdKROlNFQyFg+GAA2wCn5GNzWAOQAspZwINxQYCTlHgDcmdEARkhiANZtWbHxiQ5mKTA0IBlZMbkFRSVlVTV1UJITzf3TXcC9mzFxCfBJ4SlMrFPTOSB5hcWlFdWqtfWFrBvthNu77YOHYaNcPioC4DWa3BYPZb1BA8fjvaZQL59dqSFhiMD5YEfbK5VBQAD6wAAHrx0T50FYAMK8FA9FxKKwIKAAXlW-ywLTkClQvDgPig+VqCX8+Xy2TJCTEOIgJDghSZwAQCBEUDgzCgAE8MGAoMwRNxgHjUBgoKSQJJClApb9sUjNvpdEA">will cause a compiler error</a> if you forget to handle a case in your <code>switch</code> statement.</p>
<p>Here's what the compiler error looks like:</p>
<pre data-lang="text" style="background-color:#2b303b;color:#6c7079;" class="language-text "><code class="language-text" data-lang="text"><span style="color:#abb2bf;">Type &#39;Direction&#39; is not assignable to type &#39;never&#39;.(2322)
</span></code></pre>
<p>This is because the <code>never</code> type is a special type that represents the type of values that never occur. In other words, it's a type that can never be assigned a value.</p>
<p>In this case, our <code>switch</code> will check whether passed <code>direction</code> is one of the explicitly handled cases (<code>Up</code>, <code>Down</code>, <code>Left</code> and <code>Right</code>). If it's not, then the <code>default</code> case will be executed, which will assign the passed <code>direction</code> to the <code>_exhaustiveCheck</code> variable.</p>
<p>As there is one more variant (<code>Forward</code>) that is not handled by the <code>switch</code> statement, the compiler will throw an error because the <code>_exhaustiveCheck</code> variable is of type <code>never</code> and it can't be assigned a value of type <code>Direction</code>.</p>
<p>If we add a new case to the <code>switch</code> statement, the compiler error will go away, since the <code>switch</code> statement will handle all possible cases.
This makes <code>direction</code> to be of type <code>never</code> and the <code>_exhaustiveCheck</code> variable will be of type <code>never</code> as well.</p>
<p>The final code will look like this:</p>
<pre data-linenos data-lang="typescript" style="background-color:#2b303b;color:#6c7079;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><table><tbody><tr><td>1</td><td><span style="color:#cd74e8;">enum </span><span style="color:#abb2bf;">Direction {
</span></td></tr><tr><td>2</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>3</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>4</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td>5</td><td><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">,
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">6</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">  </span><span style="color:#eb6772;">Forward</span><span style="color:#abb2bf;">, </span><span style="font-style:italic;color:#5f697a;">// new variant
</span></mark></td></tr><tr><td>7</td><td><span style="color:#abb2bf;">}
</span></td></tr><tr><td>8</td><td><span style="color:#abb2bf;">
</span></td></tr><tr><td>9</td><td><span style="color:#cd74e8;">function </span><span style="color:#5cb3fa;">move</span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">Direction) {
</span></td></tr><tr><td>10</td><td><span style="color:#abb2bf;">  </span><span style="color:#cd74e8;">switch </span><span style="color:#abb2bf;">(</span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">) {
</span></td></tr><tr><td>11</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Up</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>12</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving up&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>13</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>14</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Down</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>15</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving down&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>16</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>17</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Left</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>18</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving left&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>19</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>20</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Right</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td>21</td><td><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving right&#39;</span><span style="color:#abb2bf;">);
</span></td></tr><tr><td>22</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">23</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">case </span><span style="color:#eb6772;">Direction</span><span style="color:#abb2bf;">.</span><span style="color:#eb6772;">Forward</span><span style="color:#abb2bf;">:
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">24</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#f0c678;">console</span><span style="color:#abb2bf;">.</span><span style="color:#5ebfcc;">log</span><span style="color:#abb2bf;">(</span><span style="color:#9acc76;">&#39;Moving forward&#39;</span><span style="color:#abb2bf;">);
</span></mark></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">25</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></mark></td></tr><tr><td>26</td><td><span style="color:#abb2bf;">    </span><span style="color:#cd74e8;">default</span><span style="color:#abb2bf;">:
</span></td></tr><tr><td><mark style="background-color:#8cc2fc0b;">27</mark></td><td><mark style="background-color:#8cc2fc0b;"><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">const </span><span style="color:#eb6772;">_exhaustiveCheck</span><span style="color:#adb7c9;">: </span><span style="color:#abb2bf;">never </span><span style="color:#adb7c9;">= </span><span style="color:#eb6772;">direction</span><span style="color:#abb2bf;">; </span><span style="font-style:italic;color:#5f697a;">// no more errors!
</span></mark></td></tr><tr><td>28</td><td><span style="color:#abb2bf;">      </span><span style="color:#cd74e8;">break</span><span style="color:#abb2bf;">;
</span></td></tr><tr><td>29</td><td><span style="color:#abb2bf;">  }
</span></td></tr><tr><td>30</td><td><span style="color:#abb2bf;">}
</span></td></tr></tbody></table></code></pre>
<h1 id="conclusion">Conclusion</h1>
<p>When working with <code>switch</code> statements, it's important to make sure that you've handled all possible cases.
If you value type safety, you can use the <code>never</code> type to make sure that you've handled all possible cases in your <code>switch</code> statements.
This not only helps you avoid runtime errors but also makes your code more predictable and easier to maintain.</p>
<h2 id="note-on-exhaustiveness-checking">Note on exhaustiveness checking</h2>
<p>The &quot;hack&quot; with the <code>never</code> type is not the most beautiful solution, but it works. It was the only way to make <code>switch</code> statements exhaustive in TypeScript I was able to find.
If you know a better way to make <code>switch</code> statements exhaustive, please let me know!</p>
<p>I hope that in the future, TypeScript will provide a better way to make <code>switch</code> statements exhaustive.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>I'll update the post with a link to the article once it's published.</p>
</div>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                
                    <span class="button next">
                        <a href="https://blog.arkusonthe.net/typescript-hiding-secrets-from-console-log/">
                            <span class="button__text">Hiding secrets from console.log (and other loggers)</span>&nbsp;
                            <span class="button__icon">→</span>
                        </a>
                    </span>
                </div>
        </div>
    
        
  <script src="https://utteranc.es/client.js"
    repo="arkus7&#x2F;arkus7.github.io"
    issue-term="title"
    theme="preferred-color-scheme"
    crossorigin="anonymous"
    async>
  </script>
  
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2023
 Arkadiusz Żmudzin</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
